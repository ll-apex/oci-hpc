# GPUインスタンスのプロビジョニング

## 概要

このラボでは、Ubuntuが実行されているOCIでGPUインスタンスをプロビジョニングするために必要な手順について説明します。

**ノート:** OCIでGPUインスタンスをプロビジョニングするには、PAYGアカウントが必要です。Oracle 30日間無料トライアルを使用している場合は、使用可能なすべてのVMおよびBMインスタンスを使用できます。

予想ワークショップ時間: 15分

### 目的

*   Oracle Cloudへのログイン
*   OCIでのGPUインスタンスのプロビジョニング

### 必要なもの

*   OCI上のユーザー・グループの一部であるユーザー(ユーザー名とパスワードを使用)。[「ユーザーの管理」](https://docs.oracle.com/en-us/iaas/Content/Identity/Tasks/managingusers.htm)ページをチェックして、コンソールを使用して**ユーザーを作成するには**および**ユーザーをグループに追加するには**方法を確認します。
*   クラウド・アカウント名- テナンシの名前(管理者またはOracle Cloudのようこそ電子メールで指定)
*   ユーザー・グループ。[グループの管理](https://docs.oracle.com/en-us/iaas/Content/Identity/Tasks/managinggroups.htm#three)ページをチェックして、コンソールを使用した**グループを作成するには**方法を確認します。
*   ユーザーがコンピュート・インスタンスを起動できるグループにポリシーが割り当てられました。[「共通ポリシー」](https://docs.oracle.com/en-us/iaas/Content/Identity/Concepts/commonpolicies.htm#top)ページで、コンソールを使用して**ユーザーがコンピュート・インスタンスを起動できるようにするには**、必要なポリシーを確認します。
*   ユーザーのコンパートメント。[「コンパートメントの管理」](https://docs.oracle.com/en-us/iaas/Content/Identity/Tasks/managingcompartments.htm#uscons)ページで、コンソールを使用した**コンパートメントを作成するには**方法を確認します。
*   GPUインスタンスをプロビジョニングするリージョン内の可用性ドメイン当たり許容される最大GPUインスタンスのサービス制限を確認します。サービス制限を引き上げるには、[サービス制限](https://docs.oracle.com/en-us/iaas/Content/General/Concepts/servicelimits.htm#top)ページのステップに従います。

## タスク1: Oracle Cloudへのログイン

Oracle Cloudからサインアウトした場合は、次のステップを使用して再度サインインします。

1.  [cloud.oracle.com](https://cloud.oracle.com)に移動し、クラウド・アカウント名を入力して**「次」**をクリックします。これは、前のセクションでアカウントを作成する際に選択した名前です。メールアドレスではありません。名前を忘れた場合は、確認の電子メールを参照してください。
    
    ![](images/cloud-oracle.png " ")
    
2.  _「Oracle Cloud Infrastructureダイレクト・サインイン」_の後に矢印を展開して、ログイン入力フィールドを表示します。
    
    ![](images/cloud-login-tenant.png " ")
    
3.  クラウド・アカウントの資格証明を入力し、**「サインイン」**をクリックします。あなたのユーザー名はあなたのメールアドレスです。パスワードは、アカウントにサインアップしたときに選択したパスワードです。
    
    ![](images/oci-signin.png " ")
    
4.  Oracle Cloudにサインインしました。
    
    ![](images/oci-console-home-page.png " ")
    

## タスク2: GPUインスタンスの起動

1.  ログインしたら、**「クイック・アクション」**セクションの**「VMインスタンスの作成」**ボタンをクリックします。
    
    ![](images/click-create-vm-instance.png " ")
    

または、左上にあるサービス・メニューをクリックし、**「コンピュート」**→**「インスタンス」**をクリックすることもできます。新しいページが開き、クリックした青色の**「インスタンスの作成」**ボタンが表示されます。

2.  コンピュート・インスタンスの名前を入力します。
    
    ![](images/fill-in-name.PNG " ")
    
3.  ドロップダウン・リストからコンパートメントを選択します。
    
    ![](images/select-compartment.PNG " ")
    
4.  可用性ドメインを選択する前に、**「ガバナンス」** -> **「制限、割当ておよび使用状況」**で、選択したリージョンの可用性ドメインにGPUインスタンスを使用できることを確認します。コンピュート・インスタンスがプロビジョニングされる可用性ドメインを選択します。
    
    ![](images/select-AD.PNG " ")
    
5.  **「イメージの変更」**ボタンをクリックします。
    
    ![](images/change-image.PNG " ")
    
    コンピュート・インスタンスに使用するイメージを選択し、**「イメージの選択」**ボタンをクリックします。Faceswapで推奨されている Ubuntu 18.04を選択しますが、その他の Linuxディストリビューションや Windowsオペレーティングシステムも動作する可能性があります。
    
    ![](images/select-image.PNG " ")
    
6.  **「シェイプの変更」**ボタンをクリックします。
    
    ![](images/change-shape.PNG " ")
    
    **「仮想マシン」**および**「専門とレガシー」**を選択します。GPUインスタンスと**Always Free** VMがあります。Standard.E2.1。マイクロ・シェイプ(GPUインスタンスを実行するためのPAYGアカウントを所有していない場合)。
    
    ![](images/select-VM-SL.PNG " ")
    
    プロビジョニングするGPUインスタンスを選択し、_「OracleおよびNVIDIAの使用条件を確認して承諾しました」_ボックスを読み、チェックして、**「シェイプの選択」**ボタンをクリックします。この場合、1 GPUのP100 (NVIDIA Pascal GPUアーキテクチャ)に基づくVM.GPU2.1です。V100 (NVIDIA Volta GPUアーキテクチャ)およびA100 (NVIDIA Ampere GPUアーキテクチャ)に基づいて仮想およびベア・メタル・マシンのサービス制限をリクエストできます。
    
    ![](images/select-GPU.PNG " ")
    
7.  コンパートメントにVCNをすでに作成している場合は、コンピュート・インスタンスを配置するVCNおよびサブネットを選択します。そうでない場合は、**「新規仮想クラウド・ネットワークの作成」**をクリックし、VCNの名前とコンパートメント、およびパブリック・サブネットの名前を選択できます。デフォルトのCIDRブロックは保持することも、調整することもできます。パブリックIPアドレスをインスタンスに割り当てることを選択できます。パブリックIPアドレスを割り当てると、このインスタンスがインターネットからアクセス可能になります。パブリックIPアドレスが必要かどうかわからない場合は、いつでも後で割り当てることができます。
    
    ![](images/create-vcn.PNG " ")
    
8.  _「ラボ1 - SSHキーの作成」_で作成したSSH公開鍵と秘密鍵のペアを使用する場合は、**「公開鍵ファイルの選択」**をクリックしてSSH公開鍵ファイルを選択するか、**「公開鍵の貼付け」**をクリックしてフィールドにSSH公開鍵を貼り付けることができます。OCIでSSH公開鍵と秘密鍵を生成し、ローカル・マシンに保存することもできます。SSHキーを指定しない場合、SSHを使用してインスタンスに接続できないことに注意してください。
    
    ![](images/add-SSH.PNG " ")
    
9.  最後のステップは、ブート・ボリューム・サイズを指定し、転送中暗号化を使用するかどうか、および暗号化キーの管理方法を選択します。デフォルトのブート・ボリューム・サイズ(Linuxの場合は46.6 GB)を使用するか、最大32TBに増やすことができます。すべてのボックスのチェックマークを外したまま、**「作成」**をクリックして(コンピュート・インスタンスの作成を確定します)。
    

![](images/boot-volume.PNG " ")

数分後、GPUコンピュート・インスタンスはステータスを**「実行中」**に変更します

![](images/instance-running.PNG " ")

## **確認**

*   **作成者/日付** - Oracle Proposal to Production Program、 Maria Patelkou氏、HPCソリューション・アーキテクト、2021年3月
*   **最終更新者/日付** - Oracle Proposal to Production Program、 Maria Patelkou氏、HPCソリューション・アーキテクト、2021年3月